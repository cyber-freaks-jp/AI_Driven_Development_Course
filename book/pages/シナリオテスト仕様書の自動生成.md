# シナリオテスト仕様書の自動生成

ユニットテストや統合テストはAIで自動化できますが、最終的な受け入れテスト（シナリオテスト）は人間が実施する必要があります。しかし、その**仕様書**はAIで自動生成できます。

## シナリオテストとは

シナリオテストは、実際のユーザー操作を模倣したテストです。

### 例：タスク管理アプリのシナリオ

```
1. ユーザー登録画面を開く
2. メールアドレスとパスワードを入力
3. 「登録」ボタンをクリック
4. ダッシュボードに遷移することを確認
5. 「新規タスク」ボタンをクリック
6. タスク名と説明を入力
7. 「作成」ボタンをクリック
8. タスク一覧にタスクが表示されることを確認
...
```

このようなシナリオは、人間が実際に操作してテストします。

## なぜ仕様書をAIで生成するのか

### 従来の問題点

- シナリオテスト仕様書を手動で作成するのは時間がかかる
- 要件定義書との齟齬が発生しやすい
- テストケースの漏れが発生しやすい
- フォーマットが統一されない

### AIで生成するメリット

- 要件定義書をもとに自動生成できる
- 漏れなく網羅的なテストケースを作成できる
- 一貫したフォーマットで作成できる
- 短時間で作成できる

## AIでシナリオテスト仕様書を生成する

### ステップ1：基本的なシナリオを生成

要件定義書をもとに、シナリオテスト仕様書を生成します。

```
プロンプト例：
「@Docs/要件定義書.md をもとに、
Docs/シナリオテスト仕様書.md を作成してください。

以下の形式で記述してください：
- テストケースID
- テストケース名
- 事前条件
- テスト手順（番号付きリスト）
- 期待結果
- 実施者欄
- 実施日欄
- 結果欄（OK/NG）

要件定義書の全ての機能要件をカバーしてください。
マークダウン形式で作成してください。」
```

AIが以下のような仕様書を生成：

```markdown
# シナリオテスト仕様書：タスク管理アプリ

## TC001：ユーザー登録（正常系）

### 事前条件
- アプリケーションが起動している
- ユーザー登録画面にアクセスできる
- テスト用メールアドレス（test001@example.com）が未登録

### テスト手順
1. ブラウザでアプリケーションのURLにアクセス
2. 「新規登録」リンクをクリック
3. メールアドレス入力欄に「test001@example.com」を入力
4. パスワード入力欄に「SecureP@ss123」を入力
5. 「登録」ボタンをクリック

### 期待結果
- ダッシュボード画面に遷移する
- 画面右上にメールアドレス「test001@example.com」が表示される
- ウェルカムメッセージが表示される

### 実施者
氏名：______________ 

### 実施日
日付：____年____月____日

### 結果
- [ ] OK
- [ ] NG

**NGの場合の詳細：**
_______________________________________


---

## TC002：ユーザー登録（異常系：無効なメールアドレス）

### 事前条件
- アプリケーションが起動している
- ユーザー登録画面にアクセスできる

### テスト手順
1. ブラウザでアプリケーションのURLにアクセス
2. 「新規登録」リンクをクリック
3. メールアドレス入力欄に「invalid-email」を入力
4. パスワード入力欄に「SecureP@ss123」を入力
5. 「登録」ボタンをクリック

### 期待結果
- エラーメッセージ「有効なメールアドレスを入力してください」が表示される
- ユーザー登録画面のまま遷移しない
- 入力内容は保持される

### 実施者
氏名：______________ 

### 実施日
日付：____年____月____日

### 結果
- [ ] OK
- [ ] NG

**NGの場合の詳細：**
_______________________________________

---

## TC003：タスク作成（正常系）

...
```

### ステップ2：特定の機能のシナリオを詳細化

特定の機能について、さらに詳細なシナリオを追加します。

```
プロンプト例：
「@Docs/シナリオテスト仕様書.md の
「タスク作成」機能について、以下のシナリオを追加してください：
- 優先度を「高」に設定した場合
- 期限を設定した場合
- 複数のタグを設定した場合
- 他のユーザーと共有した場合

各シナリオは独立したテストケースとして記述してください。」
```

### ステップ3：エッジケースを追加

```
プロンプト例：
「@Docs/シナリオテスト仕様書.md に、
以下のエッジケースを追加してください：
- タスク名を最大文字数（255文字）で入力
- 同時に複数のユーザーが同じタスクを編集
- ネットワークエラー時の挙動
- セッションタイムアウト時の挙動」
```

### ステップ4：非機能要件のテストを追加

```
プロンプト例：
「@Docs/要件定義書.md の非機能要件をもとに、
パフォーマンステストとセキュリティテストのシナリオを追加してください。

パフォーマンステスト：
- タスク一覧表示（1000件）のレスポンスタイム
- 同時ログイン数100ユーザーでの動作

セキュリティテスト：
- SQLインジェクションの防御
- XSS攻撃の防御
- CSRF攻撃の防御」
```

## 実際に人間がテストを実施

生成されたシナリオテスト仕様書をもとに、人間が実際にテストを実施します。

### テスト実施の流れ

1. **仕様書をプリントアウト**（または画面表示）
2. **手順に従って操作**
3. **期待結果と実際の結果を確認**
4. **OK/NGを記録**
5. **NGの場合は詳細を記録**

### 例：実施後の記録

```markdown
## TC001：ユーザー登録（正常系）

### 実施者
氏名：山田太郎

### 実施日
日付：2025年1月15日

### 結果
- [x] OK
- [ ] NG
```

または

```markdown
## TC002：ユーザー登録（異常系：無効なメールアドレス）

### 実施者
氏名：山田太郎

### 実施日
日付：2025年1月15日

### 結果
- [ ] OK
- [x] NG

**NGの場合の詳細：**
エラーメッセージが「無効な入力です」と表示され、
「有効なメールアドレスを入力してください」と表示されなかった。
```

## AIにテストケースの妥当性をチェックさせる

生成したシナリオテスト仕様書を、AIにレビューさせます。

```
プロンプト例：
「@Docs/シナリオテスト仕様書.md をレビューしてください。
@Docs/要件定義書.md の全ての機能要件がカバーされているか確認してください。
不足しているテストケースがあれば指摘してください。」
```

## シナリオテスト仕様書もGitで管理

シナリオテスト仕様書もマークダウン形式なので、Gitで管理できます。

```bash
git add Docs/シナリオテスト仕様書.md
git commit -m "feat: シナリオテスト仕様書を作成"
```

### テスト結果の記録もGitで管理

テスト実施後、結果を記録してコミットします。

```bash
git add Docs/シナリオテスト仕様書.md
git commit -m "test: 2025-01-15 シナリオテスト実施結果を記録"
```

これにより、過去のテスト結果も追跡できます。

## まとめ：シナリオテスト仕様書自動生成のポイント

| ポイント | 内容 |
|---------|------|
| **自動生成** | 要件定義書をもとにAIで生成 |
| **網羅性** | 全機能要件をカバー |
| **形式統一** | 一貫したフォーマット |
| **人間が実施** | 最終的なテストは人間が実施 |
| **Git管理** | 仕様書と結果をGitで管理 |

**重要な原則**

1. **仕様書はAIで生成**：手動で書かない
2. **要件定義書を参照**：漏れを防ぐ
3. **人間がテスト実施**：自動化できない部分は人間が担当
4. **結果を記録**：OK/NGと詳細を記録
5. **Gitで管理**：変更履歴を追跡

シナリオテストは人間が実施しますが、仕様書の作成はAIに任せることで、大幅に効率化できます。

次のセクションでは、人間による最終チェックの重要性について学びます。
