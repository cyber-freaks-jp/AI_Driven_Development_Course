# AIツールのセキュリティ設定

AIツールの設定を適切に行うことで、情報漏洩リスクを大幅に削減できます。

---

## AIセキュリティ設定の3つの原則

### 原則1：学習データとして使用されない設定をする

**なぜ重要か**：
- AIに送信したコードが学習データとして使われると、インターネット上で情報公開されてしまう可能性があります
- 機密情報やAPIキーが漏洩するリスクがあります

**Cursorでの設定例**：

Cursorには、送信したコードを学習データとして使用させない設定があります。

具体的には、Cursorの設定画面で以下のような項目を**無効化**します：
- 「学習データとして使用する」のチェックを外す
- 「使用統計を送信する」のチェックを外す
- 「診断データを共有する」のチェックを外す

（具体的な設定手順は、Cursorのバージョンによって異なるため、公式ドキュメントを参照してください）

**他のツールでも同様の設定がありますので、ツールに応じて設定をググりましょう**

### 原則2：機密ファイルの除外設定をする

**なぜ重要か**：
- `.env`ファイルやAPIキーを含むファイルをAIに読み取らせると、そのまま送信されるリスクがあります
- パスワード、秘密鍵などの機密情報が含まれるファイルは絶対に送信してはいけません

**どうやって除外するのか**：

各AIツールには、**AIが読み取る対象から除外したいファイルを指定する仕組み**があります。

**Cursorの例：`.cursorignore`ファイル**

`.cursorignore`とは、Gitの`.gitignore`ファイルと似た役割を果たす設定ファイルです。このファイルに記述されたルールに従って、CursorのAIが読み込まないようにするファイルを定義できます。

プロジェクトのルートディレクトリに`.cursorignore`ファイルを作成し、除外したいファイルを記述します：

```
# .cursorignore の例
.env
.env.*
*.key
*.pem
id_rsa
*.p12
credentials.json
config/secrets.yml
config/database.yml
```

この設定により、Cursorは上記のファイルをAIに送信しません。

**他のツールでも同様の仕組みがあります**：
- GitHub Copilot：`.gitattributes`で除外
- Claude Code：`.claudeignore`で除外
- その他のツール：各ツールのドキュメントを参照

**除外すべきファイルの例**：
- 環境変数ファイル（`.env`、`.env.local`など）
- 秘密鍵（`.pem`、`.key`、`id_rsa`など）
- 認証情報（`credentials.json`、`secrets.yml`など）
- データベース設定（`database.yml`など）
- 証明書ファイル（`.p12`など）

### 原則3：操作権限を制限する

**なぜ重要か**：
- AIが無制限にファイル削除、データベース操作、外部API実行などを行えると、破壊的な操作が実行されるリスクがあります
- 必要最小限の権限のみを与えることで、リスクを最小化できます

**Cursorでの設定例：`.cursorrules`ファイル**

`.cursorrules`とは、Cursorに対してAIの動作ルールを指示するための設定ファイルです。

プロジェクトのルートディレクトリに`.cursorrules`ファイルを作成し、AIに禁止したい操作を記述します：

```
# .cursorrules の例

## 禁止事項
- ファイルの削除は禁止
- データベースへの直接アクセス禁止
- 外部APIへの直接通信禁止
- 環境変数の読み取り禁止
- システムディレクトリ（/etc、/sys）への書き込み禁止

## 許可事項
- 新規ファイルの作成
- 既存ファイルの編集
- ローカルでのテスト実行
```

この設定により、CursorのAIは上記のルールに従って動作します。

**他のツールでも同様の仕組みがあります**：
- Claude Code：`.claude/instructions.md`でルール設定
- ChatGPT：Custom Instructionsでルール設定
- その他のツール：各ツールのドキュメントを参照

**禁止すべき操作の例**：
- ファイルの削除（`rm -rf`など）
- データベースへの直接アクセス
- 外部APIへの直接通信
- システムディレクトリへの書き込み
- `sudo`コマンドの使用

---

## ツール別の設定ポイント

### Cursor

**重要な設定**：
1. プライバシー設定で学習データ使用を無効化
2. `.cursorignore`で機密ファイルを除外
3. `.cursorrules`で操作ルールを設定

**原則**：
- テレメトリ送信を無効化
- コード分析データの共有を無効化

### GitHub Copilot

**重要な設定**：
1. **Enterprise版を使用**（個人版は企業利用非推奨）
2. `.gitattributes`で機密ファイルを除外
3. VSCode設定で除外言語を指定

**原則**：
- 個人版を使う場合、必ず「学習に使用しない」設定を有効化
- Enterprise版はデフォルトで学習に使用されない

### Claude（claude.ai / Claude API）

**重要な設定**：
1. デフォルトで学習に使用されない（Anthropicのポリシー）
2. APIキーや機密情報を送信前に自動マスク

**原則**：
- Anthropicはデフォルトでセキュア
- 追加の設定は不要だが、送信前のマスキング処理を実装すると安全性が向上

### ChatGPT（OpenAI）

**重要な設定**：
1. **Enterprise版を使用**（個人版は企業利用非推奨）
2. 個人版の場合、「学習に使用しない」設定を有効化
3. Custom Instructionsでセキュリティルールを設定

**原則**：
- 無料版・Plus版は学習データに使用される可能性がある
- Enterprise版はSOC 2準拠で企業利用に適している

### Claude Code（CLI）

**重要な設定**：
1. `.claude/instructions.md`でセキュリティポリシーを設定
2. サンドボックス環境で実行
3. 環境変数で制限を設定

**原則**：
- システムコマンドの実行は事前承認を必須にする
- ホームディレクトリ外へのアクセスを禁止

---

## 操作権限の階層管理

AIツールの権限は、作業内容に応じて3段階で管理します。

### レベル1：読み取りのみ

**許可される操作**：
- ファイルの読み取り
- コードの分析

**禁止される操作**：
- ファイルの書き込み・削除
- コマンドの実行
- ネットワークアクセス

**適した場面**：
- コードレビュー
- バグ調査
- 仕様確認

### レベル2：ファイル編集可

**許可される操作**：
- ファイルの読み取り
- ファイルの編集・作成

**禁止される操作**：
- コマンドの実行
- ネットワークアクセス

**適した場面**：
- コード実装
- リファクタリング
- ドキュメント作成

### レベル3：完全な権限（サンドボックス内のみ）

**許可される操作**：
- すべての操作（ファイル、コマンド、ネットワーク）

**重要な条件**：
- **サンドボックス環境内でのみ許可**
- 本番環境では絶対に使用しない

**適した場面**：
- テスト実行
- ビルド実行
- パッケージインストール

---

## セキュリティチェックリスト

### Cursor
- [ ] 学習データ使用を無効化
- [ ] テレメトリ送信を無効化
- [ ] `.cursorignore`で機密ファイルを除外
- [ ] `.cursorrules`でルール設定

### GitHub Copilot
- [ ] Enterprise版を使用（または個人版で学習無効化）
- [ ] `.gitattributes`で機密ファイルを除外
- [ ] VSCode設定で除外言語を指定

### Claude
- [ ] API使用（claude.aiより安全）
- [ ] 機密情報の自動マスク処理を実装

### ChatGPT
- [ ] Enterprise版を使用（推奨）
- [ ] 個人版の場合は学習無効化
- [ ] Custom Instructionsでルール設定

### Claude Code
- [ ] `.claude/instructions.md`でルール設定
- [ ] サンドボックス環境で実行
- [ ] 環境変数で制限設定

---

## まとめ

### セキュリティ設定の3原則

1. **学習データとして使用されない設定を有効化**
   - Enterprise版・ビジネス版を使用
   - 個人版は必ず「学習に使用しない」設定

2. **機密ファイルを除外設定で保護**
   - `.env`、秘密鍵、認証情報などを除外
   - `.cursorignore`、`.gitattributes`を活用

3. **操作権限は必要最小限に制限**
   - 作業内容に応じて3段階で権限管理
   - サンドボックス環境以外では完全な権限を与えない

**企業利用では、必ずEnterprise版またはビジネス版を使用してください。**
