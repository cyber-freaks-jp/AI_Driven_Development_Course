# 明確さは力なり

## はじめに

AI駆動開発で最も重要なスキルは何でしょうか？プログラミング技術？いいえ、**明確な指示を出す能力**です。

曖昧な指示では曖昧な結果しか得られません。明確な指示は、AIの真の力を引き出します。

## なぜ明確さが重要なのか

### AIは読心術師ではない

**誤解：**
「AIは賢いから、言いたいことを察してくれる」

**現実：**
AIはあなたの頭の中を読めません。書かれたことしか理解できません。

**例：**
```
❌ 曖昧な指示
「ログイン機能を作って」

AIは悩みます：
- どの言語で？
- フレームワークは？
- 認証方式は？（JWT? Session? OAuth?）
- データベースは？
- フロントエンドも？
```

```
✅ 明確な指示
「Node.js + Express でJWT認証のログインAPIを作成してください。

技術スタック：
- Express.js
- JWT for authentication
- bcrypt for password hashing
- PostgreSQL with Prisma

エンドポイント：
- POST /api/auth/register
- POST /api/auth/login
- GET /api/auth/me

レスポンス形式：JSON
エラーハンドリング：必須」

AIは迷わず実装できます。
```

### 明確さ = 時間の節約

**曖昧な指示の場合：**
```
1. 曖昧な指示を出す（1分）
2. AIが間違った実装（5分）
3. 「違う、こうじゃない」と修正依頼（2分）
4. AIが再実装（5分）
5. また違う... 再度修正（2分）
6. 3回目の実装（5分）

合計：20分以上
```

**明確な指示の場合：**
```
1. 明確な指示を書く（5分）
2. AIが正確に実装（5分）

合計：10分
```

**結論：**
明確な指示を書く時間は投資です。結果的に時間を節約します。

## 明確な指示の5つの要素

### 1. What（何を）

**目的を明確に：**

❌ **曖昧：**
```
アプリを作って
```

✅ **明確：**
```
タスク管理アプリを作成してください。
ユーザーがタスクを追加・編集・削除・完了できる機能です。
```

### 2. How（どのように）

**技術スタックを指定：**

❌ **曖昧：**
```
Webアプリで
```

✅ **明確：**
```
技術スタック：
- フロントエンド：React 18 + TypeScript
- スタイリング：TailwindCSS
- 状態管理：Zustand
- ビルドツール：Vite
```

### 3. Where（どこに）

**ファイルの配置を指定：**

❌ **曖昧：**
```
適切な場所に配置して
```

✅ **明確：**
```
ファイル配置：
- src/components/TaskList.tsx
- src/components/TaskItem.tsx
- src/hooks/useTasks.ts
- src/types/task.ts
```

### 4. Why（なぜ）- 必要に応じて

**背景や制約を説明：**

❌ **曖昧：**
```
認証を追加して
```

✅ **明確：**
```
セキュリティ要件のため、JWT認証を実装してください。

理由：
- ステートレスな認証が必要
- マイクロサービス間で認証情報を共有
- トークンの有効期限管理が必要
```

### 5. When（いつ・条件）

**条件や制約を明示：**

❌ **曖昧：**
```
エラーハンドリングを追加
```

✅ **明確：**
```
以下の場合のエラーハンドリングを実装：

1. ネットワークエラー時
   → リトライ機能（最大3回）
   → ユーザーに通知

2. 認証エラー時
   → ログイン画面にリダイレクト

3. バリデーションエラー時
   → フォームにエラーメッセージ表示
```

## 実践例：Before / After

### 例1：機能実装

**Before（曖昧）：**
```
ユーザー登録機能を作って
```

**After（明確）：**
```
ユーザー登録機能を実装してください。

エンドポイント：
POST /api/auth/register

リクエストボディ：
{
  "email": "user@example.com",
  "password": "password123",
  "name": "田中太郎"
}

バリデーション：
- email: 有効なメールアドレス形式
- password: 8文字以上、英数字含む
- name: 必須、2-50文字

処理フロー：
1. バリデーション
2. メールアドレスの重複チェック
3. パスワードのハッシュ化（bcrypt）
4. データベースに保存
5. JWTトークンを生成して返却

レスポンス（成功時）：
{
  "token": "jwt_token_here",
  "user": {
    "id": 1,
    "email": "user@example.com",
    "name": "田中太郎"
  }
}

エラーレスポンス：
- 400: バリデーションエラー
- 409: メールアドレス重複
- 500: サーバーエラー

使用技術：
- Node.js + Express
- Prisma (PostgreSQL)
- bcrypt
- jsonwebtoken
```

### 例2：バグ修正

**Before（曖昧）：**
```
ログインできないバグを修正して
```

**After（明確）：**
```
ログイン機能のバグを修正してください。

症状：
- メールアドレス: test@example.com
- パスワード: correct_password
で、「Invalid credentials」エラーが返される

期待される動作：
正しいパスワードの場合、JWTトークンが返される

関連ファイル：
- src/routes/auth.ts (line 45-67)
- src/services/authService.ts

エラーログ：
```
POST /api/auth/login 401
Error: Invalid credentials
  at authService.login (authService.ts:23)
```

確認済み：
- データベースにユーザーは存在する
- パスワードのハッシュは保存されている
- 他のエンドポイントは正常動作

修正後の確認：
1. ユニットテストが通ること
2. 実際のログインが成功すること
```

### 例3：リファクタリング

**Before（曖昧）：**
```
コードをきれいにして
```

**After（明確）：**
```
user.ts ファイルをリファクタリングしてください。

対象ファイル：
src/models/user.ts

目的：
- 可読性の向上
- 保守性の向上
- TypeScript strict modeへの対応

具体的な改善点：
1. 150行のgetUserDataメソッドを分割
   → 1メソッド = 1責務

2. any型を排除
   → 適切な型定義

3. マジックナンバーを定数化
   → 定数名で意図を明確に

4. 重複コードの削除
   → DRY原則に従う

5. エラーハンドリングの統一
   → カスタムエラークラスを使用

制約：
- 既存のインターフェースは維持（破壊的変更なし）
- 既存のテストは全て通ること
- パフォーマンスは維持または向上
```

## 明確さを高めるテクニック

### テクニック1：具体例を含める

**Before：**
```
商品リストを表示して
```

**After：**
```
商品リストを表示してください。

表示例：
┌─────────────────────────────┐
│ MacBook Pro             │
│ ¥250,000               │
│ [カートに追加]          │
└─────────────────────────────┘
┌─────────────────────────────┐
│ iPhone 15 Pro           │
│ ¥150,000               │
│ [カートに追加]          │
└─────────────────────────────┘

各商品カードに表示：
- 商品名
- 価格（税込）
- カートに追加ボタン
- 商品画像（サムネイル）

レイアウト：
- グリッドレイアウト
- レスポンシブ（スマホは1列、タブレットは2列、PCは3列）
```

### テクニ���ク2：制約を明示

**Before：**
```
データベースに保存して
```

**After：**
```
データベースに保存してください。

制約：
- トランザクションを使用（全て成功 or 全て失敗）
- 保存前にバリデーション必須
- 既存データとの重複チェック
- エラー時は適切にロールバック
- 保存後はログに記録
```

### テクニック3：優先順位を示す

**Before：**
```
これらの機能を実装して
```

**After：**
```
以下の機能を優先順位順に実装してください。

優先度: 高（必須）
1. ユーザー登録
2. ログイン
3. タスクの作成・表示

優先度: 中（できれば）
4. タスクの編集・削除
5. タスクの検索

優先度: 低（余裕があれば）
6. タスクのカテゴリ分け
7. タスクの共有機能

まず優先度「高」の3つを完成させてください。
```

### テクニック4：期待される動作を記述

**Before：**
```
ボタンを押したら何か起きるようにして
```

**After：**
```
「送信」ボタンのクリック時の動作を実装してください。

期待される動作：
1. ボタンが無効化される（二重送信防止）
2. ローディングスピナーが表示される
3. フォームデータをAPIに送信
4. 成功時：
   - 成功メッセージを表示（緑色のトースト）
   - フォームをクリア
   - タスク一覧を再読み込み
5. エラー時：
   - エラーメッセージを表示（赤色のトースト）
   - フォームは保持
6. 最後にボタンを再度有効化

アニメーション：
- ボタン: クリック時に縮小エフェクト
- トースト: フェードイン・アウト（3秒後に自動消去）
```

### テクニック5：既存コードとの関連を示す

**Before：**
```
新しい機能を追加して
```

**After：**
```
既存のユーザー管理機能に、プロフィール編集を追加してください。

既存コード：
@src/components/UserProfile.tsx
@src/services/userService.ts

統合ポイント：
- UserProfile コンポーネントに「編集」ボタンを追加
- 既存の UserService.getUser() を使用してデータ取得
- 同じスタイル（TailwindCSS）を使用
- 既存のフォームバリデーションパターンに従う

新規作成ファイル：
- src/components/UserProfileEdit.tsx
- src/components/UserProfileEditForm.tsx
```

## 明確さのチェックリスト

指示を送る前に確認：

### 基本情報
- [ ] 何を作るのか明確か？
- [ ] 使用する技術スタックを指定したか？
- [ ] ファイルの配置を指定したか？

### 詳細情報
- [ ] 入力・出力を具体的に記述したか？
- [ ] エラーハンドリングを指定したか？
- [ ] 制約や条件を明示したか？

### 品質管理
- [ ] 期待される動作を記述したか？
- [ ] テストについて言及したか？
- [ ] パフォーマンス要件を示したか？

### コンテキスト
- [ ] 既存コードとの関連を説明したか？
- [ ] なぜこれが必要か説明したか？
- [ ] 優先順位を示したか？

## 実践トレーニング

### 練習1：曖昧な指示を明確にする

**課題：**
「ToDoアプリを作って」

**あなたの明確な指示：**
```
[ここに書いてみましょう]
```

**模範解答例：**
```
ToDoアプリを作成してください。

技術スタック：
- React 18 + TypeScript
- Vite
- TailwindCSS
- LocalStorage（データ保存）

機能：
1. タスク追加
   - 入力フォーム（テキスト）
   - Enterキーで追加
   - 空の入力は拒否

2. タスク表示
   - リスト形式
   - 完了/未完了を区別
   - 完了タスクは取り消し線

3. タスク操作
   - チェックボックスで完了切り替え
   - 削除ボタン

4. データ永続化
   - LocalStorageに自動保存
   - ページリロード後も保持

デザイン：
- シンプル・ミニマル
- モバイルフレンドリー

ファイル構成：
- src/App.tsx (メイン)
- src/components/TodoList.tsx
- src/components/TodoItem.tsx
- src/components/TodoInput.tsx
- src/types/todo.ts
```

## よくある失敗と対策

### 失敗1：「いい感じに」と丸投げ

❌ **NG：**
```
ログイン画面をいい感じにデザインして
```

✅ **OK：**
```
ログイン画面のデザインを以下の仕様で作成してください：

スタイル：
- モダン・ミニマル
- カラー：#3B82F6（プライマリ）、#1F2937（テキスト）
- Google のログイン画面を参考

レイアウト：
- 中央配置（縦横）
- カード型（影付き）
- 最大幅：400px

要素：
1. ロゴ（上部、中央）
2. タイトル「ログイン」
3. メールアドレス入力
4. パスワード入力
5. ログインボタン（幅100%、青）
6. 「パスワードを忘れた」リンク
7. 「新規登録」リンク
```

### 失敗2：専門用語だけで説明

❌ **NG：**
```
RESTful APIをCRUDで
```

✅ **OK：**
```
REST APIを実装してください。

エンドポイント：
- GET /api/tasks - 全タスク取得
- POST /api/tasks - タスク作成
- PUT /api/tasks/:id - タスク更新
- DELETE /api/tasks/:id - タスク削除

各エンドポイントの詳細仕様：
[具体的なリクエスト・レスポンス例]
```

### 失敗3：複数のことを同時に依頼

❌ **NG：**
```
ログイン機能を作って、デザインも改善して、
テストも書いて、ドキュメントも更新して
```

✅ **OK：**
```
まず、ログイン機能を実装してください。

[詳細な仕様]

実装完了後、次のステップで
デザイン改善をお願いします。
```

## まとめ

**明確さの力：**

✓ **AIの真の力を引き出す**
  - 正確な実装
  - 高品質な出力
  - 時間の節約

✓ **5つの要素を含める**
  - What（何を）
  - How（どのように）
  - Where（どこに）
  - Why（なぜ）
  - When（いつ・条件）

✓ **具体的に記述**
  - 例を含める
  - 制約を明示
  - 期待される動作を記述

✓ **チェックリストで確認**
  - 送信前に必ずチェック
  - 曖昧な部分はないか
  - 追加情報が必要か

**金言：**

> 「明確な指示は、AIとの対話における最も強力な武器である」

> 「曖昧さはコストである。明確さは投資である」

> 「AIは賢いが、読心術師ではない」

明確な指示を書く習慣を身につければ、AI駆動開発の効率は劇的に向上します！
