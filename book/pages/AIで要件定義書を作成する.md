# AIで要件定義書を作成する

このセクションでは、Cursorを使って実際にマークダウン形式の要件定義書を作成する方法を学びます。

## 要件定義書の基本構成

マークダウンで書く要件定義書は、以下の構成がおすすめです：

```markdown
# 要件定義書：[プロジェクト名]

## 1. プロジェクト概要
- 目的
- 背景
- ターゲットユーザー

## 2. 機能要件
### 2.1 [機能名A]
- 詳細説明
- ユーザーストーリー
- 制約条件

### 2.2 [機能名B]
...

## 3. 非機能要件
- パフォーマンス
- セキュリティ
- 可用性

## 4. 技術要件
- 使用技術
- 開発環境
- デプロイ環境

## 5. 制約事項
- スケジュール
- 予算
- リソース
```

## Cursorで要件定義書を作成する

### ステップ1：プロジェクトの初期化

まず、プロジェクトディレクトリを作成し、Cursorで開きます。

```bash
mkdir my-project
cd my-project
git init
```

Cursorでこのディレクトリを開きます。

### ステップ2：Composerで要件定義書の雛形を作成

`Cmd+I`でComposerを起動し、以下のようにプロンプトを入力します：

```
プロンプト例：
「タスク管理WebアプリケーションのDocs/要件定義書.mdを作成してください。
以下の要件を含めてください：
- ユーザー登録・ログイン機能
- タスクのCRUD操作
- タスクの優先度設定
- 期限管理
- チーム共有機能

マークダウン形式で、見出しレベルを適切に使い分け、
箇条書きを活用して読みやすく構成してください。」
```

### ステップ3：AIが生成した要件定義書をレビュー

Cursorが自動生成した要件定義書を確認します。例えば以下のような内容が生成されます：

```markdown
# 要件定義書：タスク管理Webアプリケーション

## 1. プロジェクト概要

### 目的
チーム全体でタスクを効率的に管理し、プロジェクトの進捗を可視化するWebアプリケーションを開発する。

### ターゲットユーザー
- 小規模〜中規模の開発チーム（5〜20名）
- フリーランスや個人事業主
- リモートワーク中心のチーム

## 2. 機能要件

### 2.1 ユーザー登録・ログイン機能

#### 詳細説明
ユーザーがメールアドレスとパスワードでアカウントを作成し、ログインできる機能。

#### 機能詳細
- メールアドレスによるユーザー登録
- パスワードは8文字以上、英数字記号を含む
- メール認証必須
- パスワードリセット機能
- OAuth認証（Google、GitHub）

#### 制約条件
- パスワードはbcryptでハッシュ化
- セッション有効期限は24時間

### 2.2 タスクのCRUD操作

#### 詳細説明
ユーザーがタスクを作成、閲覧、編集、削除できる基本機能。

#### 機能詳細
- タスク作成：タイトル、説明、優先度、期限を設定
- タスク一覧表示：フィルタリング、ソート機能
- タスク詳細表示：コメント機能付き
- タスク編集：すべての項目を編集可能
- タスク削除：確認ダイアログ表示

...
```

### ステップ4：詳細を追加・修正

AIが生成した要件定義書に対して、具体的な指示を追加します。

`Cmd+K`でインライン編集を使い、特定の箇所を修正：

```
プロンプト例：
「2.1 ユーザー登録・ログイン機能に、
以下を追加してください：
- 2要素認証（2FA）のサポート
- ログイン試行回数制限（5回まで）
- アカウントロック機能（30分間）」
```

### ステップ5：Gitにコミット

要件定義書が完成したら、Gitにコミットします。

Cursorのターミナルで：

```bash
git add Docs/要件定義書.md
git commit -m "feat: タスク管理アプリの要件定義書を作成"
```

**なぜGitで管理するのか？**

- 変更履歴が追跡できる
- バージョン管理が容易
- チームメンバーとの共有・レビューがしやすい
- 設計・実装フェーズでAIに正確に伝えられる

## 実際のプロンプトのコツ

### 良いプロンプトの例

```
✅ 具体的で明確
「ECサイトの要件定義書.mdを作成してください。
以下の機能を含めてください：
- 商品の検索・一覧表示（カテゴリ、価格帯でフィルタリング）
- ショッピングカート機能（数量変更、削除）
- 決済機能（クレジットカード、PayPal）
- 注文履歴表示

非機能要件として以下も含めてください：
- レスポンスタイム：平均200ms以内
- 同時接続数：1000ユーザー
- セキュリティ：PCI DSS準拠」
```

### 悪いプロンプトの例

```
❌ 曖昧で不明確
「ECサイトの要件定義書を作って」
→ 具体的な機能が不明
→ 非機能要件が欠落
→ 再度修正が必要になる
```

## 段階的に詳細化する

複雑なシステムの場合、一度に全てを指示せず、段階的に詳細化するのが効果的です。

### ステップ1：大枠を作る

```
プロンプト：
「タスク管理アプリの要件定義書.mdを作成してください。
以下のセクションの見出しだけ作成してください：
- プロジェクト概要
- 機能要件（主要5機能）
- 非機能要件
- 技術要件
- 制約事項」
```

### ステップ2：各セクションを詳細化

```
プロンプト：
「2.1 ユーザー登録・ログイン機能のセクションを詳細化してください。
以下を含めてください：
- 詳細説明
- 機能詳細（箇条書き）
- ユーザーストーリー
- 制約条件」
```

### ステップ3：さらに具体化

```
プロンプト：
「2.1.1 OAuth認証の実装詳細を追加してください。
対応プロバイダ、認可フロー、エラーハンドリングを含めてください。」
```

このように**分割して指示**することで、AIの精度が上がり、修正の手間が減ります。

## 既存ドキュメントからの変換

既存のExcelやWord形式の要件定義書がある場合：

### 方法1：手動でコピペ＋整形

1. ExcelやWordの内容をコピー
2. Cursorに新規ファイル作成
3. `Cmd+K`で「この内容をマークダウン形式に整形してください」

### 方法2：AIで自動変換

1. ExcelやWordファイルをプロジェクトに配置
2. Composerで以下を実行：

```
プロンプト：
「@要件定義書.xlsx の内容を読み取り、
マークダウン形式の要件定義書.mdに変換してください。
見出しレベルを適切に設定し、箇条書きを活用してください。」
```

## まとめ

| ステップ | 内容 | ツール |
|---------|------|-------|
| 1 | プロジェクト初期化 | Bash |
| 2 | 要件定義書の雛形作成 | Composer (Cmd+I) |
| 3 | レビュー＆修正 | Cmd+K |
| 4 | 詳細化・追加 | Composer / Cmd+K |
| 5 | Gitコミット | Bash |

**重要なポイント**

- マークダウン形式で作成する
- 具体的で明確なプロンプトを使う
- 複雑な場合は段階的に詳細化
- 必ずGitで管理する
- AIが生成した内容は必ず人間がレビュー

次のセクションでは、要件定義書に図を追加する方法（Mermaid）を学びます。
